<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MentorLoop EDU | Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #f3f4f6;
      color: #1f2937;
    }

    header {
      background: #1e40af;
      color: white;
      padding: 18px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      font-size: 1.4rem;
    }

    header a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      padding: 24px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
.badge {
  display: inline-block;
  padding: 8px 14px;
  margin: 6px;
  border-radius: 999px;
  font-weight: bold;
  font-size: 0.85rem;
  background: #e5e7eb;
  color: #374151;
}
.badge.unlocked {
  background: #dbeafe;
  color: #1e40af;
}

    h2 {
      margin-top: 0;
      color: #1e40af;
    }

    .btn {
      display: block;
      margin-top: 12px;
      padding: 12px;
      width: 100%;
      background: #2563eb;
      color: white;
      border-radius: 8px;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
    }

    .btn.report {
      background: #dc2626;
    }
  </style>
</head>

<body>

<header>
  <h1>MentorLoop EDU Dashboard</h1>
  <a href="index.html">Logout</a>
</header>

<div class="container">
  <div class="grid">

    <!-- PROFILE -->
    <div class="card">
      <h2>Your Profile</h2>
      <p><strong>Name:</strong> <span id="userName"></span></p>
      <p><strong>Role:</strong> Student</p>
      <p><strong>Points:</strong> <span id="points">0</span></p>
      <div class="card">
  <h2>üèÖ Your Badges</h2>
  <div id="badges"></div>
</div>
    <!-- ACTIONS -->
    <div class="card">
      <h2>Actions</h2>

      <a href="ask-doubt.html" class="btn">
        Ask a Doubt
      </a>
      
      <a href="questions.html" class="btn" style="background:#22c55e;">
  ‚úçÔ∏è Answer Questions
</a>

<a href="games.html" class="btn" style="background:#10b981;">
  üéÆ Play fun quizzes
</a>
       <a href="ai.html" class="btn" style="background:#22c55e;">
  ‚úçÔ∏è AI
</a>
      <!-- REPORT BUTTON -->
      <a href="fair-play.html" class="btn report">
        üö© Report Inappropriate Content
        <!-- Answers Section -->
<div class="card">
  <h2>üìò Community Answers</h2>
  <p class="small">
    Browse answers submitted by mentors and students.
    <div class="card">
  </p>
      
<div id="questions"></div>
  <iframe
    src="https://docs.google.com/spreadsheets/d/e/2PACX-1vReE-w_AKX-s_OaY5T66qHHjuijW7f9SXqF-Pa6f_4xsuV0Q0atyQCwTqRx2vvhfUwF8ZRBfL9yUeX_/pubhtml"
    width="100%"
    height="500"
    frameborder="0"
    style="border-radius:10px;">
  </iframe>
      </a>
    </div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase =window.supabase.createClient(
  "https://usgsmkpqxdgvtepmnugh.supabase.co",
  "usgsmkpqxdgvtepmnugh"
);

</script>
<script>
document.addEventListener("DOMContentLoaded", async () => {

  const { data, error } = await supabase
    .from("questions")
    .select("*");

  if (error) {
    alert("Error loading questions: " + error.message);
    return;
  }

  const box = document.getElementById("questions");

  if (!box) {
    alert("DIV with id='questions' not found");
    return;
  }

  if (data.length === 0) {
    box.innerHTML = "<p>Answers:</p>";
    return;
  }

  box.innerHTML = "";

  data.forEach(q => {
    const div = document.createElement("div");
    div.style.padding = "10px";
    div.style.borderBottom = "1px solid #ddd";

    div.innerHTML = `
      <b>${q.subject}</b><br>
      ${q.question}<br>
      <small>Asked by: ${q.student_name}</small>
    `;

    box.appendChild(div);
  });

});
</script>
<script>
// Load points
let points = localStorage.getItem("ml_points");
if (!points) {
  points = 0;
  localStorage.setItem("ml_points", points);
}

document.getElementById("points").innerText = points;

// Function to add points
function addPoints(value) {
  let current = parseInt(localStorage.getItem("ml_points"));
  current += value;
  localStorage.setItem("ml_points", current);
  document.getElementById("points").innerText = current;
}
</script>

<script>
console.log("Supabase client:", supabase);
</script>
  <script>
function renderBadges() {
  const points = parseInt(localStorage.getItem("ml_points") || "0");

  const badgeList = [
    { name: "ü§î Curious Starter", min: 110 },
    { name: "üí° Active Learner", min: 200 },
    { name: "üß† Knowledge Helper", min: 540 },
    { name: "üëë Mentor Champ", min: 1000 }
  ];

  const box = document.getElementById("badges");
  box.innerHTML = "";

  badgeList.forEach(badge => {
    const span = document.createElement("span");
    span.className = "badge";

    if (points >= badge.min) {
      span.classList.add("unlocked");
    }

    span.textContent = badge.name;
    box.appendChild(span);
  });
}

// Call it once when dashboard loads
renderBadges();
</script>
<script>
function loadQuestions() {
  const questions = JSON.parse(localStorage.getItem("ml_questions") || "[]");

  const box = document.getElementById("questions");

  if (questions.length === 0) {
    box.innerHTML = "<p>Answers:</p>";
    return;
  }

  box.innerHTML = "";

  questions.reverse().forEach(q => {
    const div = document.createElement("div");
    div.style.padding = "10px";
    div.style.borderBottom = "1px solid #eee";

    div.innerHTML = `
      <strong>${q.subject}</strong><br>
      ${q.question}<br>
      <small>Asked by: ${q.name}</small>
    `;

    box.appendChild(div);
  });
}

loadQuestions();
</script>
<script>
function loadAcademicStats() {

  const doubts = JSON.parse(localStorage.getItem("ml_questions",value) || "[]");
  const answers = JSON.parse(localStorage.getItem("ml_answers") || "[]");
  const points = parseInt(localStorage.getItem("ml_points") || "0");

  document.getElementById("totalDoubts").innerText = doubts.length;
  document.getElementById("totalAnswers").innerText = answers.length;
  document.getElementById("points").innerText = points;

  // Unique subjects
  const subjects = [...new Set(doubts.map(q => q.subject))];
  document.getElementById("subjectsList").innerText =
    subjects.length ? subjects.join(", ") : "No subjects yet";
}

loadAcademicStats();
</script>
<script>
document.getElementById("userName").innerText =
  localStorage.getItem("ml_user_name") || "Learner";

document.getElementById("userRole").innerText =
  localStorage.getItem("ml_user_role") || "Student";
</script>
</body>
</html>





























