
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MentorLoop EDU | Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* ===== RESET ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', sans-serif;
}

/* ===== BODY ===== */
body {
  background: linear-gradient(135deg, #0f172a, #1e293b);
  color: #e2e8f0;
  min-height: 100vh;
}

/* ===== HEADER ===== */
header {
  background: #111827;
  padding: 20px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 6px 20px rgba(0,0,0,0.4);
}

header h1 {
  font-size: 1.5rem;
  font-weight: 600;
  background: linear-gradient(90deg, #22d3ee, #10b981);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

header a {
  text-decoration: none;
  color: #94a3b8;
  font-weight: 600;
  transition: 0.3s;
}

header a:hover {
  color: #22d3ee;
}

/* ===== CONTAINER ===== */
.container {
  max-width: 1200px;
  margin: auto;
  padding: 40px 25px;
}

/* ===== GRID ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
}

/* ===== CARD ===== */
.card {
  background: #1e293b;
  padding: 25px;
  border-radius: 18px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.5);
  transition: 0.3s ease;
  position: relative;
  overflow: hidden;
}

.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.7);
}

.card::before {
  content: "";
  position: absolute;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle at top left, rgba(34,211,238,0.15), transparent);
  top: -50%;
  left: -50%;
  pointer-events: none;
}

h2 {
  margin-bottom: 15px;
  font-size: 18px;
  color: #22d3ee;
}

.card p {
  margin-bottom: 8px;
  font-size: 14px;
  color: #cbd5e1;
}

.btn {
  display: block;
  margin-top: 12px;
  padding: 12px;
  width: 100%;
  border-radius: 12px;
  text-align: center;
  text-decoration: none;
  font-weight: 600;
  transition: 0.3s ease;
  background: linear-gradient(90deg, #10b981, #22d3ee);
  color: white;
}

.btn:hover {
  transform: scale(1.05);
  opacity: 0.9;
}

.btn.report {
  background: linear-gradient(90deg, #ef4444, #dc2626);
}

.badge {
  display: inline-block;
  padding: 8px 14px;
  margin: 6px 6px 0 0;
  border-radius: 999px;
  font-weight: 600;
  font-size: 0.8rem;
  background: #334155;
  color: #94a3b8;
  transition: 0.3s;
}

.badge.unlocked {
  background: linear-gradient(90deg, #10b981, #22d3ee);
  color: white;
  box-shadow: 0 0 12px rgba(34,211,238,0.6);
}

iframe {
  border: none;
  border-radius: 14px;
  margin-top: 10px;
}

.small {
  font-size: 13px;
  color: #94a3b8;
}

@media (max-width: 600px) {
  header h1 {
    font-size: 1.1rem;
  }
}
</style>
</head>

<body>

<header>
  <h1>MentorLoop EDU Dashboard</h1>
  <a href="index.html">Logout</a>
</header>

<div class="container">
  <div class="grid">

    <!-- PROFILE -->
    <div class="card">
      <h2>Your Profile</h2>
      <p><strong>Name:</strong> <span id="userName"></span></p>
      <p><strong>Role:</strong> Student</p>
      <p><strong>Points:</strong> <span id="points">0</span></p>
<p><strong>üî• Streak:</strong> <span id="streak">0</span> days</p>
      <h2 style="margin-top:20px;">üèÖ Your Badges</h2>
      <div id="badges"></div>
    </div>
<!-- ACADEMIC SUMMARY (NEW PROFESSIONAL CARD) -->
<div class="card">
<h2>üìä Academic Summary</h2>

<p><strong>Total Tests Taken:</strong> <span id="testsTaken">0</span></p>
<p><strong>Total Questions Solved:</strong> <span id="totalQuestions">0</span></p>
<p><strong>Average Performance:</strong> <span id="averageScore">0</span>%</p>
<p><strong>Strongest Subject:</strong> <span id="strongest">-</span></p>
<p><strong>Needs Improvement:</strong> <span id="weakest">-</span></p>
<p style="margin-top:15px;"><strong>Certificate Progress (100 Tests)</strong></p>
<div class="progress-bar">
  <div class="progress-fill" id="certProgress"></div>
</div>
<p class="small"><span id="certText"></span></p>

</div>
    <!-- ACTIONS -->
    <div class="card">
      <h2>Actions</h2>

      <a href="ask-doubt.html" class="btn">Ask a Doubt</a>

      <a href="questions.html" class="btn" style="background:#22c55e;">
        ‚úçÔ∏è Answer Questions
      </a>
<a href="answers.html" class="btn" style="background:#22c55e;">
        ‚úçÔ∏èFind answers
      </a>
      <a href="games.html" class="btn" style="background:#10b981;">
        üéÆ Play Fun Quizzes
      </a>
<a href="battle-mode.html" class="btn" style="background:#22c55e;">
        üéÆ Play wth your friend(note, he must be beside you)
      </a>
    <a href="certificate.html" class="btn" style="background:#22c55e;">
        See your certificate
      </a>
      <!-- NEW GRADE TEST BUTTONS -->
      <a href="grade-test.html?level=primary" class="btn">
        üè´ Primary Grade Test
      </a>

      <a href="grade-test.html?level=lowersecondary" class="btn">
        üìò Lower Secondary Test
      </a>

      <a href="ai.html" class="btn" style="background:#10b981;">
        ü§ñ Meet EDUBots
      </a>

     
      <a href="blog.html" class="btn" style="background:#22c55e;">
        Know About Us
      </a>

      <a href="fair-play.html" class="btn report">
        üö© Report Inappropriate Content
      </a>
    </div>

  </div>
</div>

<!-- KEEPING ALL YOUR SCRIPTS BELOW EXACTLY AS IS -->

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = window.supabase.createClient(
  "https://usgsmkpqxdgvtepmnugh.supabase.co",
  "usgsmkpqxdgvtepmnugh"
);
</script>

<script>
document.getElementById("userName").innerText =
  localStorage.getItem("ml_user_name") || "Learner";

let points = localStorage.getItem("ml_points") || 0;
document.getElementById("points").innerText = points;

function renderBadges() {
  const points = parseInt(localStorage.getItem("ml_points") || "0");

  const badgeList = [
    { name: "ü§î Curious Starter", min: 110 },
    { name: "üí° Active Learner", min: 200 },
    { name: "üß† Knowledge Helper", min: 540 },
    { name: "üëë Mentor Champ", min: 1000 }
  ];

  const box = document.getElementById("badges");
  box.innerHTML = "";

  badgeList.forEach(badge => {
    const span = document.createElement("span");
    span.className = "badge";

    if (points >= badge.min) {
      span.classList.add("unlocked");
    }

    span.textContent = badge.name;
    box.appendChild(span);
  });
}

renderBadges();
</script>
<script>
function updateStreak() {

  const today = new Date().toDateString();
  const lastVisit = localStorage.getItem("ml_last_visit");
  let streak = parseInt(localStorage.getItem("ml_streak") || "0");

  if (!lastVisit) {
    // First time user
    streak = 1;
  } else {

    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);

    if (lastVisit === today) {
      // Same day ‚Üí no change
    }
    else if (lastVisit === yesterday.toDateString()) {
      // Came next day ‚Üí increase streak
      streak += 1;
    }
    else {
      // Missed a day ‚Üí reset streak
      streak = 1;
    }
  }

  localStorage.setItem("ml_streak", streak);
  localStorage.setItem("ml_last_visit", today);

  document.getElementById("streak").innerText = streak;
}

updateStreak();
</script>
  <script>
// Academic Summary Logic
let testsTaken=parseInt(localStorage.getItem("ml_tests_taken")||"0");
let totalScore=parseInt(localStorage.getItem("ml_total_score")||"0");
let totalQuestions=parseInt(localStorage.getItem("ml_total_questions")||"0");

document.getElementById("testsTaken").innerText=testsTaken;
document.getElementById("totalQuestions").innerText=totalQuestions;

let average=0;
if(totalQuestions>0){
average=((totalScore/totalQuestions)*100).toFixed(1);
}
document.getElementById("averageScore").innerText=average;

let progress=Math.min((testsTaken/100)*100,100);
document.getElementById("certProgress").style.width=progress+"%";
document.getElementById("certText").innerText=
testsTaken+"/100 tests completed";  
    // SUBJECT ANALYSIS
let stats = JSON.parse(localStorage.getItem("ml_subject_stats") || "{}");

let strongest = "-";
let weakest = "-";

let highest = -1;
let lowest = 101;

for(let subject in stats){

  if(stats[subject].total > 0){

    let avg = (stats[subject].score / stats[subject].total) * 100;

    if(avg > highest){
      highest = avg;
      strongest = subject;
    }

    if(avg < lowest){
      lowest = avg;
      weakest = subject;
    }
  }
}

document.getElementById("strongest").innerText = strongest;
document.getElementById("weakest").innerText = weakest;
    
</script>
</body>
</html>










