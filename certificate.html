<!DOCTYPE html>
<html>
<head>
<title>MentorLoop EDU Certificate</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#0f172a,#1e293b);
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
color:white;
}

.card{
background:#1e293b;
padding:40px;
border-radius:20px;
width:95%;
max-width:800px;
text-align:center;
box-shadow:0 20px 40px rgba(0,0,0,0.6);
}

h1{
color:#22d3ee;
margin-bottom:20px;
}

.certificate{
border:4px solid #22d3ee;
padding:30px;
margin-top:20px;
border-radius:15px;
background:#0f172a;
}

button{
margin-top:20px;
padding:12px 20px;
border:none;
border-radius:10px;
background:#22d3ee;
color:black;
cursor:pointer;
font-weight:bold;
}
button:hover{
background:#10b981;
color:white;
}
</style>
</head>

<body>

<div class="card" id="mainCard">
<h1>MentorLoop EDU Certificate</h1>
<div id="content"></div>
</div>

<script>

// Load storage
let testsTaken = parseInt(localStorage.getItem("ml_tests_taken") || "0");
let totalScore = parseInt(localStorage.getItem("ml_total_score") || "0");
let totalQuestions = parseInt(localStorage.getItem("ml_total_questions") || "0");

// Calculate overall percentage
let overallPercentage = 0;
if(totalQuestions > 0){
overallPercentage = ((totalScore / totalQuestions) * 100).toFixed(1);
}

const content = document.getElementById("content");

// REQUIREMENTS
const REQUIRED_TESTS = 100;
const REQUIRED_PERCENTAGE = 80;

if(testsTaken >= REQUIRED_TESTS){

content.innerHTML = `
<div class="certificate">
<h2>ðŸŽ“ Certificate of Academic Excellence</h2>
<p>This certifies that</p>
<h2>${localStorage.getItem("ml_user_name") || "Student"}</h2>
<p>has successfully completed</p>
<h3>${testsTaken} Qualified Tests</h3>
<p>with an overall performance of</p>
<h2>${overallPercentage}%</h2>
<p>demonstrating consistent academic excellence on MentorLoop EDU.</p>
<p><strong>Requirement:</strong> Minimum 100 tests with â‰¥80% each âœ”</p>
</div>

<button onclick="window.print()">Download / Print Certificate</button>
`;

} else {

let remaining = REQUIRED_TESTS - testsTaken;

content.innerHTML = `
<p>You need <strong>${remaining}</strong> more qualified tests (â‰¥80%)</p>
<p>Completed Qualified Tests: ${testsTaken} / 100</p>
<p>Current Overall Performance: ${overallPercentage}%</p>
<button onclick="window.location.href='primary-quiz.html'">
Take More Tests
</button>
`;

}

</script>

</body>
</html>
