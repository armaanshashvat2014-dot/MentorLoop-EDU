<!DOCTYPE html>
<html>
<head>
<title>Battle Mode | MentorLoop EDU</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#0f172a,#1e293b);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container{
  background:#111827;
  width:95%;
  max-width:600px;
  padding:25px;
  border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.6);
}

h1{
  text-align:center;
  margin-bottom:15px;
}

button{
  padding:10px 15px;
  margin:5px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#2563eb;
  color:white;
  font-weight:bold;
}

button:hover{
  background:#1e40af;
}

.option{
  display:block;
  width:100%;
  margin:8px 0;
}

.progress{
  height:10px;
  background:#374151;
  border-radius:5px;
  overflow:hidden;
  margin-bottom:15px;
}

.progress-bar{
  height:10px;
  width:0%;
  background:#22c55e;
}

.scoreboard{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

.hidden{
  display:none;
}
</style>
</head>

<body>

<div class="container">

<h1>‚öîÔ∏è Battle Arena</h1>

<div id="modeSelect">
  <button onclick="startGame('ai')">Battle Slow AI</button>
  <button onclick="startGame('pvp')">Battle Player (Same Device)</button>
</div>

<div id="gameArea" class="hidden">

<div class="scoreboard">
  <div>Player 1: <span id="score1">0</span></div>
  <div id="score2Label">AI: <span id="score2">0</span></div>
</div>

<div class="progress">
  <div class="progress-bar" id="progressBar"></div>
</div>

<h3 id="question"></h3>

<div id="options"></div>

</div>

<div id="result" class="hidden">
  <h2 id="winnerText"></h2>
  <button onclick="location.reload()">Play Again</button>
</div>

</div>

<script>

const questions = [
  {q:"5 + 3 = ?", a:["6","7","8","9"], c:2},
  {q:"Capital of India?", a:["Delhi","Mumbai","Chennai","Kolkata"], c:0},
  {q:"12 √∑ 4 = ?", a:["2","3","4","6"], c:1},
  {q:"Water formula?", a:["CO2","H2O","O2","NaCl"], c:1},
  {q:"9 x 2 = ?", a:["18","16","20","14"], c:0}
];

let current=0;
let score1=0;
let score2=0;
let mode="ai";
let turn=1;

function startGame(selectedMode){
  mode=selectedMode;
  document.getElementById("modeSelect").classList.add("hidden");
  document.getElementById("gameArea").classList.remove("hidden");

  if(mode==="pvp"){
    document.getElementById("score2Label").innerHTML="Player 2: <span id='score2'>0</span>";
  }

  loadQuestion();
}

function loadQuestion(){
  if(current>=questions.length){
    endGame();
    return;
  }

  let q=questions[current];
  document.getElementById("question").innerText=q.q;

  let optionsHTML="";
  q.a.forEach((opt,i)=>{
    optionsHTML+=`<button class="option" onclick="checkAnswer(${i})">${opt}</button>`;
  });

  document.getElementById("options").innerHTML=optionsHTML;

  document.getElementById("progressBar").style.width=
  ((current/questions.length)*100)+"%";
}

function checkAnswer(selected){
  let correct=questions[current].c;

  if(mode==="pvp"){
    if(turn===1){
      if(selected===correct) score1++;
      turn=2;
      alert("Player 2 Turn");
    }else{
      if(selected===correct) score2++;
      turn=1;
      current++;
    }
  }

  if(mode==="ai"){
    if(selected===correct) score1++;

    // Slightly Slow AI (random delay)
    setTimeout(()=>{
      if(Math.random()>0.4){ // 60% accuracy
        score2++;
      }
      current++;
      updateScores();
      loadQuestion();
    },1500);

    updateScores();
    return;
  }

  updateScores();
  loadQuestion();
}

function updateScores(){
  document.getElementById("score1").innerText=score1;
  document.getElementById("score2").innerText=score2;
}

function endGame(){
  document.getElementById("gameArea").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");

  let text="Draw!";
  if(score1>score2) text="Player 1 Wins! üèÜ";
  if(score2>score1) text=(mode==="ai")?"AI Wins! ü§ñ":"Player 2 Wins! üèÜ";

  document.getElementById("winnerText").innerText=text;
}

</script>

</body>
</html>
